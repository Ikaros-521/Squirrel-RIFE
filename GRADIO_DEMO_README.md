# SVFI Gradio Demo 使用指南

## 简介

这是一个基于Gradio的SVFI（Squirrel Video Frame Interpolation）演示程序，提供了一个简单的Web界面来使用SVFI的视频补帧功能，无需复杂的Qt界面操作。

## 安装依赖

在使用Gradio Demo之前，请确保已安装所有必要的依赖：

```bash
pip install -r requirements.txt
```

## 运行Demo

执行以下命令启动Gradio Demo：

```bash
python gradio_demo.py
```

启动后，程序会在本地启动一个Web服务器（通常在http://127.0.0.1:7860），并自动在浏览器中打开界面。

## 使用方法

1. **上传视频**：点击"输入视频"区域上传您要处理的视频文件
2. **调整参数**：
   - **目标帧率**：设置输出视频的帧率，通常为原始帧率的整数倍
   - **半精度模式**：启用可节省显存，但可能略微降低质量
   - **光流尺度**：控制光流计算的精度，较小的值可节省显存
   - **转场检测阈值**：控制转场检测的灵敏度，值越小越灵敏
   - **CRF值**：控制输出视频的质量，值越小质量越高（文件越大）
3. **开始处理**：点击"开始处理"按钮
4. **查看结果**：处理完成后，输出视频将显示在右侧，可以直接播放或下载

## 参数说明

### 目标帧率（Target FPS）

设置输出视频的帧率。例如，如果原视频是24fps，设置为48fps将使视频速度保持不变但更加流畅。

### 半精度模式（FP16）

启用半精度计算可以减少显存占用，对于显存较小的显卡（如4GB或更少）特别有用。对于大多数情况，开启此选项不会明显影响输出质量。

### 光流尺度（RIFE Scale）

控制RIFE算法中光流计算的精度。值越小，显存占用越少，但可能会影响补帧质量。推荐值为0.5，如果显存不足，可以降低到0.3或0.2。

### 转场检测阈值（Scene Detection Threshold）

控制转场检测的灵敏度。值越小，检测越灵敏，但可能会错误地将正常场景变化识别为转场。值越大，检测越保守，但可能会漏掉一些转场。默认值12适用于大多数视频。

### CRF值（Constant Rate Factor）

控制输出视频的质量和文件大小。值范围为0-51，其中：
- 0-18：视觉无损（文件较大）
- 19-23：高质量（推荐）
- 24-28：中等质量
- 29+：低质量（文件较小）

## 注意事项

1. 处理大型视频可能需要较长时间，请耐心等待
2. 程序会创建临时文件用于处理，程序结束时会自动清理
3. 如果遇到显存不足的问题，请尝试：
   - 启用半精度模式
   - 降低光流尺度
   - 处理较小分辨率的视频

## 故障排除

如果遇到问题，请检查：

1. 是否已安装所有依赖
2. CUDA是否可用（对于NVIDIA显卡）
3. 视频格式是否受支持
4. 是否有足够的磁盘空间和内存

如果程序崩溃，请查看控制台输出的错误信息以获取更多详情。